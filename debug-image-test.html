<!DOCTYPE html>
<html>
<head>
    <title>Image Test</title>
</head>
<body>
    <h1>Direct Image Test</h1>
    <img src="/public-objects/product-images/6y9M7PQvU4JNi6f8A39ra.jpg" 
         style="max-width: 300px; border: 2px solid red;" 
         onload="console.log('✅ Image loaded successfully')"
         onerror="console.error('❌ Image failed to load')">
    
    <img src="/public-objects/product-images/Tg7hPOh3CxbWQt8rzmY1N.jpg" 
         style="max-width: 300px; border: 2px solid blue;" 
         onload="console.log('✅ Image 2 loaded successfully')"
         onerror="console.error('❌ Image 2 failed to load')">
    
    <img src="/public-objects/product-images/NNxGFI1n-VBRJ5vpPqqKV.JPG" 
         style="max-width: 300px; border: 2px solid green;" 
         onload="console.log('✅ Image 3 loaded successfully')"
         onerror="console.error('❌ Image 3 failed to load')">

    <script>
        // Test fetch directly with browser headers
        async function testImage() {
            console.log('Testing image fetch...');
            try {
                const response = await fetch('/public-objects/product-images/6y9M7PQvU4JNi6f8A39ra.jpg?debug=1', {
                    headers: {
                        'User-Agent': navigator.userAgent,
                        'Accept': 'image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8'
                    }
                });
                console.log('✅ Fetch response status:', response.status);
                console.log('✅ Fetch response headers:', Object.fromEntries(response.headers.entries()));
                if (response.ok) {
                    const blob = await response.blob();
                    console.log('✅ Blob size:', blob.size, 'type:', blob.type);
                    
                    // Create object URL and test it
                    const objectUrl = URL.createObjectURL(blob);
                    const testImg = new Image();
                    testImg.onload = () => console.log('✅ Object URL image loaded successfully');
                    testImg.onerror = () => console.error('❌ Object URL image failed');
                    testImg.src = objectUrl;
                } else {
                    console.error('❌ Response not OK:', response.status, response.statusText);
                    const text = await response.text();
                    console.error('❌ Response body:', text);
                }
            } catch (error) {
                console.error('❌ Fetch error:', error);
            }
        }
        
        // Test multiple times to see if it's intermittent
        setTimeout(() => testImage(), 100);
        setTimeout(() => testImage(), 500);
        setTimeout(() => testImage(), 1000);
    </script>
</body>
</html>