<!DOCTYPE html>
<html>
<head>
    <title>API Test - Business Daily Deals</title>
</head>
<body>
    <h2>Testing API Endpoints</h2>
    <div id="results"></div>
    
    <script>
    async function testAPI() {
        const results = document.getElementById('results');
        
        try {
            // Test health endpoint
            results.innerHTML += '<h3>Testing /api/health:</h3>';
            const healthRes = await fetch('/api/health');
            const healthData = await healthRes.json();
            results.innerHTML += '<pre>' + JSON.stringify(healthData, null, 2) + '</pre>';
            
            // Test deals endpoint
            results.innerHTML += '<h3>Testing /api/deals:</h3>';
            const dealsRes = await fetch('/api/deals');
            const dealsData = await dealsRes.json();
            results.innerHTML += '<pre>' + JSON.stringify(dealsData.slice(0, 2), null, 2) + '</pre>';
            results.innerHTML += '<p><strong>Total deals: ' + dealsData.length + '</strong></p>';
            
            // Test hot deals
            results.innerHTML += '<h3>Testing /api/deals?type=hot:</h3>';
            const hotRes = await fetch('/api/deals?type=hot');
            const hotData = await hotRes.json();
            results.innerHTML += '<pre>' + JSON.stringify(hotData.slice(0, 1), null, 2) + '</pre>';
            results.innerHTML += '<p><strong>Hot deals: ' + hotData.length + '</strong></p>';
            
            results.innerHTML += '<h2 style="color: green;">✅ All APIs Working!</h2>';
            
        } catch (error) {
            results.innerHTML += '<h2 style="color: red;">❌ API Error: ' + error.message + '</h2>';
        }
    }
    
    testAPI();
    </script>
</body>
</html>